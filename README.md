# Проект 2-го спринта

# Описание задачи

## Задача:
Сделать миграцию в отдельные логические таблицы, а затем собрать на них витрину данных.


## Требования к новой модели
	1) Таблицы модели не должны иметь избыточность.
	2) Из новой модели можно получить те же результаты запрашиваемых данных, что и из старой модели.
	3) Каждая сущность имеет свои атрибуты в рамках одной таблицы.
	4) Новая схема должна поддерживать возможность добавления новых акций и промо-предложений.
	5) Из новой модели можно получить те же результаты запрашиваемых данных, что и из старой модели с временем, отличающимся не более, чем на 1 порядок (x10).
	6) Доступность (99,99) и надежность должны быть не хуже, чем при старой схеме.


## Таблица shipping, которая представляет собой последовательность действий при доставке, перечисленную ниже:

	id — уникальный идентификатор записи в таблице.

	shipping_id — уникальный идентификатор доставки.

	sale_id — уникальный идентификатор заказа. К одному заказу может быть привязано несколько строчек shipping_id, то есть логов, с информацией о доставке.

	order_id — уникальный идентификатор заказа.

	client_id — уникальный идентификатор клиента.

	payment_amount — сумма платежа (то есть дублирующаяся информация).

	state_datetime — время обновления состояния заказа.

	product_id — уникальный идентификатор товара.

	description — полное описание товара.

	vendor_id — уникальный идентификатор вендора. К одному вендору может быть привязано множество sale_id и множество строк доставки.

	name_category — название категории товара.

	base_country — страна производитель.

	status - статус доставки в таблице shipping по данному shipping_id. Может принимать значения in_progress — доставка в процессе, либо finished — доставка завершена.

	state — промежуточные точки заказа, которые изменяются в соответствии с обновлением информации о доставке по времени state_datetime.
		- booked (пер. «заказано»);
		- fulfillment — заказ доставлен на склад отправки;
		- queued (пер. «в очереди») — заказ в очереди на запуск доставки;
		- transition (пер. «передача») — запущена доставка заказа;
		- pending (пер. «в ожидании») — заказ доставлен в пункт выдачи и ожидает получения;
		- recieved (пер. «получено») — покупатель забрал заказ;
		- returned (пер. «возвращено») — покупатель возвратил заказ после того, как его забрал.

	shipping_plan_datetime — плановая дата доставки.

	hours_to_plan_shipping — запланированное количество часов на доставку.

	shipping_transfer_description — строка со значениями transfer_type и transfer_model, записанными через :. Пример записи — 1p:car.

	transfer_type — тип доставки. 1p означает, что компания берет ответственность за доставку на себя, 3p — что за отправку ответственен вендор.

	transfer_model — модель доставки, то есть способ, которым заказ доставляется до точки: car — машиной, «train» — поездом, «ship» — кораблем, «airplane» — самолетом, «multiple» — комбинированной доставкой.

	shipping_transfer_rate — процент стоимости доставки для вендора в зависимости от типа и модели доставки, который взимается интернет-магазином для покрытия расходов.

	shipping_country — страна доставки, учитывая описание тарифа для каждой страны.

	shipping_country_base_rate — налог на доставку в страну, который является процентом от стоимости payment_amount.

	vendor_agreement_description  — строка, в которой содержатся данные agreement_id, agreement_number, agreement_rate, agreement_commission, записанные через разделитель «:» (двоеточие без кавычек). Пример записи — 12:vsp-34:0.02:0.023.
		- agreement_id — идентификатор договора.
		- agreement_number — номер договора в бухгалтерии.
		- agreement_rate — ставка налога за стоимость доставки товара для вендора.
		- agreement_commission — комиссия, то есть доля в платеже являющаяся доходом компании от сделки.


## Особенности данных:
	1) Порядка 2% заказов исполняется с просрочкой, и это норма для вендоров. Вендор №3, у которого этот процент достигает 10%, скорее всего неблагонадёжен.

	2) Около 2% заказов не доходят до клиентов.
	В пределах нормы и то, что порядка 1.5% заказов возвращаются клиентами. При этом у вендора №21 50% возвратов. Он торгует электроникой и ноутбуками — очевидно, в его товарах много брака и стоит его изучить.
